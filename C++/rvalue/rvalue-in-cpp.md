# 右值引用

今天准备一次性搞懂右值引用.

## lvalue和rvalue
能取地址的就是lvalue，不能的就是右值。只强调一点：**局部对象作为函数返回值时(值返回时)，被视为右值。**

## 几种函数参数

函数参数的类型很重要，不同类型(值,左值引用，右值引用)的参数会导致编译期时的函数绑定结果不同。

在进行函数重载时，不能够同时出现值和引用的两个版本，否在在你调用函数时，编译器无法决断这个实参到底是值还是引用，会发生```ambiguous```的调用。

再说明一下绑定规则:
- ```cosnt Type&```可以绑定左值引用，也可以绑定右值引用。
- ```Type&```只能绑定左值引用。
- ```Type&&```只能绑定右值引用。

```cosnt Type&```是一种很宽泛的类型：在没有```Type&```和```Type&&```时，编译器会选择```const Type&```;而当三者同时存在时，```const Type&```又不会被选中。所以```const Type&```可以理解成一种替补类型，它的优先级比另外两种引用都低。


## 移动构造函数
移动构造函数的目的在于避免拷贝对象内部的资源,而是直接窃取(标准库提供的移动构造函数都有这个效果).主要用在这些情景：
* 函数返回一个值，会发生一次拷贝(实际上编译器有优化，会直接避免这次拷贝，直接返回这个对象，-fno-elide-constructors)
* 拷贝对象时,窃取对象资源
* 拷贝对象时，窃取对象资源的同时，避免两个对象的析构函数重复释放内存(这也是浅拷贝的一个弊端)
